# WARNING: This file is auto-generated. Do not modify it manually.
# Generated by: redhat-distribution/build.py

# For image registry.redhat.io/ubi9/python-311:9.6-1749631027
FROM registry.access.redhat.com/ubi9/python-311@sha256:ae0aa0e09d9e8fb585a019f0f1e7031d53b0def2bf1934291928b9b52aa465d5
WORKDIR /opt/app-root

RUN pip install sqlalchemy # somehow sqlalchemy[asyncio] is not sufficient
RUN pip install \
    aiosqlite \
    autoevals \
    chardet \
    datasets \
    fastapi \
    fire \
    httpx \
    kubernetes \
    llama_stack_provider_lmeval==0.1.5 \
    llama_stack_provider_trustyai_fms==0.1.2 \
    matplotlib \
    mcp \
    nltk \
    numpy \
    openai \
    opentelemetry-exporter-otlp-proto-http \
    opentelemetry-sdk \
    pandas \
    pillow \
    psycopg2-binary \
    pymilvus \
    pymongo \
    pypdf \
    redis \
    requests \
    scikit-learn \
    scipy \
    sentencepiece \
    sqlalchemy[asyncio] \
    tqdm \
    transformers \
    uvicorn
RUN pip install --index-url https://download.pytorch.org/whl/cpu torch torchvision
RUN pip install --no-deps sentence-transformers
RUN pip install --no-cache llama-stack==0.2.10
RUN mkdir -p .llama/providers.d .cache
COPY redhat-distribution/run.yaml ./
COPY redhat-distribution/providers.d/ .llama/providers.d/

ENTRYPOINT ["python", "-m", "llama_stack.distribution.server.server", "--config", "/opt/app-root/run.yaml"]
